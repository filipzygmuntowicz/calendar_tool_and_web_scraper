import task1
from datetime import datetime
soonest_date = __import__("find-available-slot")


class Test:

    def test_download_sellers_json(self):
        task1.sellers.add_to_dictionary(
            "ascendeum.com", task1.Seller("ascendeum.com"))
        task1.get_sellers("ascendeum.com")
        final_data = []
        max_depth = 0
        for seller in task1.sellers.dictionary.values():
            final_data.append(
                {"domain": seller.domain, "contractors": seller.contractors})
        final_data = {"items": final_data}
        assert final_data == {'items': [{'domain': 'ascendeum.com', 'contractors': [{'name': 'Tracker Network LLC', 'domain': 'tracker.gg'}, {'name': 'Tracker Network LLC', 'domain': 'battlefieldtracker.com'}, {'name': 'Tracker Network LLC', 'domain': 'destinytracker.com'}, {'name': 'Tracker Network LLC', 'domain': 'dungeon.report'}, {'name': 'Tracker Network LLC', 'domain': 'fortnitetracker.com'}, {'name': 'Tracker Network LLC', 'domain': 'halotracker.com'}, {'name': 'Tracker Network LLC', 'domain': 'pubgtracker.com'}, {'name': 'Tracker Network LLC', 'domain': 'raid.report'}, {'name': 'Tracker Network LLC', 'domain': 'realmtracker.com'}, {'name': 'Tracker Network LLC', 'domain': 'tracker.network'}, {'name': 'Stands4 LTD', 'domain': 'abbreviations.com'}, {'name': 'Gamepress LLC', 'domain': 'gamepress.gg'}, {'name': 'The Bolde Inc.', 'domain': 'bolde.com'}, {'name': 'Clear Coast LTD', 'domain': 'greetingsisland.com'}, {'name': 'Wehco Media Inc.', 'domain': 'arkansasonline.com'}, {'name': 'Wehco Media Inc.', 'domain': 'camdennews.com'}, {'name': 'Wehco Media Inc.', 'domain': 'eldoradonews.com'}, {'name': 'Wehco Media Inc.', 'domain': 'hotsr.com'}, {'name': 'Wehco Media Inc.', 'domain': 'magnoliabannernews.com'}, {'name': 'Wehco Media Inc.', 'domain': 'newstribune.com'}, {'name': 'Wehco Media Inc.', 'domain': 'nwaonline.com'}, {'name': 'Wehco Media Inc.', 'domain': 'texarkanagazette.com'}, {'name': 'Wehco Media Inc.', 'domain': 'timesfreepress.com'}, {'name': 'Shekar, Inc.', 'domain': 'koreaboo.com'}, {'name': 'Waylon H. Lewis Enterprises, LLC', 'domain': 'elephantjournal.com'}, {'name': 'CQ Roll Call', 'domain': 'rollcall.com'}, {'name': 'Temptalia LLC', 'domain': 'temptalia.com'}, {'name': 'Temptalia LLC', 'domain': 'tryhardguides.com'}, {'name': 'Kueez Entertainment Ltd', 'domain': 'kueez.com'}, {'name': 'Forum LLC', 'domain': 'thelayoff.com'}, {'name': 'Forum LLC', 'domain': 'thestoreclosing.com'}, {'name': 'TN Marketing LLC', 'domain': 'tnmarketing.com'}, {'name': 'TN Marketing LLC', 'domain': 'classiccarrestorationclub.com'}, {'name': 'TN Marketing LLC', 'domain': 'creativecrochetcorner.com'}, {'name': 'TN Marketing LLC', 'domain': 'fixmyhog.com'}, {'name': 'TN Marketing LLC', 'domain': 'modelrailroadacademy.com'}, {'name': 'TN Marketing LLC', 'domain': 'nationalbowlingacademy.com'}, {'name': 'TN Marketing LLC', 'domain': 'nationalquilterscircle.com'}, {'name': 'TN Marketing LLC', 'domain': 'nationalsewingcircle.com'}, {'name': 'TN Marketing LLC', 'domain': 'outdoorphotographyguide.com'}, {'name': 'TN Marketing LLC', 'domain': 'personaldefensenetwork.com'}, {'name': 'TN Marketing LLC', 'domain': 'rvrepairclub.com'}, {'name': 'TN Marketing LLC', 'domain': 'theknittingcircle.com'}, {'name': 'TN Marketing LLC', 'domain': 'wwgoa.com'}, {'name': 'Source Digital, INC.', 'domain': 'thesource.com'}, {'name': 'Quizony SP', 'domain': 'quizony.com'}, {'name': 'Quizony SP', 'domain': 'dudequiz.com'}, {'name': 'Quizony SP', 'domain': 'matepoll.com'}, {'name': 'Quizony SP', 'domain': 'matequiz.com'}, {'name': 'Quizony SP', 'domain': 'traitrate.com'}, {'name': 'The 18, LLC', 'domain': 'the18.com'}, {'name': 'Lake-Link Inc.', 'domain': 'lake-link.com'}, {'name': 'Scores In Live', 'domain': 'scoresinlive.com'}, {'name': 'Enthused Digital, LLC', 'domain': 'enthuseddigital.com'}, {'name': 'Enthused Digital, LLC', 'domain': 'downeastboatforum.com'}, {'name': 'Enthused Digital, LLC', 'domain': 'drumforum.org'}, {'name': 'Enthused Digital, LLC', 'domain': 'epiphonetalk.com'}, {'name': 'Enthused Digital, LLC', 'domain': 'everythingsg.com'}, {'name': 'Enthused Digital, LLC', 'domain': 'gretsch-talk.com'}, {'name': 'Enthused Digital, LLC', 'domain': 'huntingchat.net'}, {'name': 'Enthused Digital, LLC', 'domain': 'jamboards.com'}, {'name': 'Enthused Digital, LLC', 'domain': 'kentuckyhunting.net'}, {'name': 'Enthused Digital, LLC', 'domain': 'luthiertalk.com'}, {'name': 'Enthused Digital, LLC', 'domain': 'marshallforum.com'}, {'name': 'Enthused Digital, LLC', 'domain': 'mylespaul.com'}, {'name': 'Enthused Digital, LLC', 'domain': 'nastyz28.com'}, {'name': 'Enthused Digital, LLC', 'domain': 'popupportal.com'}, {'name': 'Enthused Digital, LLC', 'domain': 'refugeforums.com'}, {'name': 'Enthused Digital, LLC', 'domain': 'sailinganarchy.com'}, {'name': 'Enthused Digital, LLC', 'domain': 'sevenstring.com'}, {'name': 'Enthused Digital, LLC', 'domain': 'sevenstring.org'}, {'name': 'Enthused Digital, LLC', 'domain': 'shamrockboatownersclub.com'}, {'name': 'Enthused Digital, LLC', 'domain': 'squier-talk.com'}, {'name': 'Enthused Digital, LLC', 'domain': 'strat-talk.com'}, {'name': 'Enthused Digital, LLC', 'domain': 'tdpri.com'}, {'name': 'Enthused Digital, LLC', 'domain': 'thegearpage.net'}, {'name': 'Young Hollywood LLC', 'domain': 'younghollywood.com'}, {'name': 'Young Hollywood LLC', 'domain': 'insidethelook.com'}, {'name': 'Mamas Uncut LLC', 'domain': 'mamasuncut.com'}, {'name': 'Mamas Uncut LLC', 'domain': 'at-the-buzzer.com'}, {'name': 'Mamas Uncut LLC', 'domain': 'braincharm.com'}, {'name': 'SVT Performance LLC', 'domain': 'svtperformance.com'}, {'name': 'The Daily Dot, LLC', 'domain': 'dailydot.com'}, {'name': 'The Daily Dot, LLC', 'domain': 'god.dailydot.com'}, {'name': 'The Daily Dot, LLC', 'domain': 'hoodclips.com'}, {'name': 'The Daily Dot, LLC', 'domain': 'meettheinternet.com'}, {'name': 'The Daily Dot, LLC', 'domain': 'themotherofallnerds.com'}, {'name': 'Kazan Inc, DBA Exceljet', 'domain': 'exceljet.net'}, {'name': 'Kazan Inc, DBA Exceljet', 'domain': 'wumbo.net'}, {'name': 'Qzingo', 'domain': 'buddymeter.com'}, {'name': 'Qzingo', 'domain': 'secretwhisper.app'}, {'name': 'Qzingo', 'domain': 'truebffs.com'}, {'name': 'Urge IO GmbH', 'domain': 'versus.com'}, {'name': 'Media Partners Ltd', 'domain': 'rankchart.org'}, {'name': 'Lola Digital Media LLC', 'domain': 'soaphub.com'}, {'name': 'Lola Digital Media LLC', 'domain': 'autowise.com'}, {'name': 'Lola Digital Media LLC', 'domain': 'bikerumor.com'}, {'name': 'Lola Digital Media LLC', 'domain': 'explorersweb.com'}, {'name': 'Lola Digital Media LLC', 'domain': 'improb.com'}, {'name': 'Lola Digital Media LLC', 'domain': 'gearjunkie.com'}, {'name': 'Lola Digital Media LLC', 'domain': 'irunfar.com'}, {'name': 'Lets Run', 'domain': 'letsrun.com'}, {'name': 'Daily Herald', 'domain': 'dailyherald.com'}, {'name': 'Route 413 Capital LLC', 'domain': 'thegradcafe.com'}, {'name': 'StudyTonight Technologies Private Limited', 'domain': 'studytonight.com'}, {'name': 'Ilan Bar Magen 061220380', 'domain': 'gate2home.com'}, {'name': 'Med Students Online', 'domain': 'medstudentsonline.com.au'}, {'name': 'Med Students Online', 'domain': 'medstudentsonline.com'}, {'name': 'TransMedia Inc.', 'domain': 'freeconvert.com'}, {'name': 'OBV2 LLC', 'domain': 'broncosportforum.com'}, {'name': 'OBV2 LLC', 'domain': 'bronco6g.com'}, {'name': 'OBV2 LLC', 'domain': 'civicx.com'}, {'name': 'OBV2 LLC', 'domain': 'cybertruckownersclub.com'}, {'name': 'OBV2 LLC', 'domain': 'f150gen14.com'}, {'name': 'OBV2 LLC', 'domain': 'jeepgladiatorforum.com'}, {'name': 'OBV2 LLC', 'domain': 'jlwranglerforums.com'}, {'name': 'OBV2 LLC', 'domain': 'macheforum.com'}, {'name': 'OBV2 LLC', 'domain': 'mavericktruckclub.com'}, {'name': 'OBV2 LLC', 'domain': 'mustang6g.com'}, {'name': 'OBV2 LLC', 'domain': 'ranger5g.com'}, {'name': 'OBV2 LLC', 'domain': 'rivianforums.com'}, {'name': 'OBV2 LLC', 'domain': 'supramkv.com'}, {'name': 'OBV2 LLC', 'domain': 'taycanforum.com'}, {'name': 'MenschDanke GmbH', 'domain': 'schnaeppchenfuchs.com'}, {'name': 'Circle38', 'domain': 'photocircleapp.com'}, {'name': 'Inquirer Interactive Inc.', 'domain': 'Inquirer.net'}, {'name': 'Chive Media Group', 'domain': 'thechive.com'}, {'name': 'H Brothers Inc', 'domain': 'jetpunk.com'},
                                                                                    {'name': 'LetrasLibres', 'domain': 'letraslibres.com'}]}, {'domain': 'kueez.com', 'contractors': [{'name': 'RoundForest', 'domain': 'bestdeals.today'}, {'name': 'RoundForest', 'domain': 'bestreviews.guide'}, {'name': 'Townsquare', 'domain': 'popcrush.com'}, {'name': 'HomeTalk', 'domain': 'hometalk.com'}, {'name': 'Novelty', 'domain': 'sports101.com'}, {'name': 'Novelty', 'domain': 'myhouse101.com'}, {'name': 'Novelty', 'domain': 'directexpose.com'}, {'name': 'HomeTalk', 'domain': 'upstyledaily.com'}, {'name': 'HomeTalk', 'domain': 'foodtalkdaily.com'}, {'name': 'Worldly Review', 'domain':
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    'eternallifestyle.com'}, {'name': 'Townsquare', 'domain': 'ultimateclassicrock.com'}, {'name': 'Brainye', 'domain': 'simpleblitz.com'}, {'name': 'Brainye', 'domain': 'mommytribune.com'}, {'name': 'Brainye', 'domain': 'lifelistener.com'}, {'name': 'Brainye', 'domain': 'epiqlife.com'}, {'name': 'Townsquare', 'domain': 'loudwire.com'}, {'name': 'Allinhiphop', 'domain': 'allhiphop.com'}, {'name': 'EMG', 'domain': 'morninghoney.com'}, {'name': 'EMG', 'domain': 'theroyalobserver.com'}, {'name': 'IronSource', 'domain': 'lifelessoninc.com'}, {'name': 'Townsquare', 'domain': 'xxlmag.com'}, {'name': 'Reignn', 'domain': 'freshedits.com'}, {'name': 'VerticalScope', 'domain': 'autoguide.com'}, {'name': 'Brainye', 'domain': 'tradingdraft.com'}, {'name': 'NineDawn', 'domain': 'parentsdeal.com'}, {'name': 'HomeTalk', 'domain': 'petguide.com'}]}]}

    def test_find_soonest_available_data(self):
        test_now = datetime.strptime(
            '2022-06-01 23:50:24', '%Y-%m-%d %H:%M:%S').timestamp()
        test_now2 = datetime.strptime(
            '2022-07-01 09:00:00', '%Y-%m-%d %H:%M:%S').timestamp()
        assert str(soonest_date.find_soonest_date(
            "/in", 30, 2, test_now2)) == "2022-07-02 13:00:00"
